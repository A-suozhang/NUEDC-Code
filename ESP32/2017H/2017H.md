# 2017H
* 远程幅频测试
    * 基本需求: 制作一个放大器,测量出其幅频特性
    * 从1MHz ~ 40MHz,完成一个步进1MHz的扫频
    * 将结果反馈
* 包含了数字部分,不包含模拟部分,模拟基本思路即为在放大器之后接一个提取包络,所得到的值通过DAC采入,即可代表幅频响应
    * 采用单片机(ESP32)完成功能,使用内容包括
        * AD
        * DA
        * 驱动AD9910(DDS)
        * 屏幕UI输入
        * WiFi
        * UART

# ESP32 Part
* 基本思路
    * 扫频之后,稍等一段时间(100ms,模拟电路的响应时间)ADC读取包络值
        * ADC为12位ADC
            * CH6 - 对应ESP32 引脚32
            * DB11 - 动态范围0~3.9V (0~2.2V的不能覆盖输出信号的幅度)
        * DAC为 8位DA
            * 输出的数据需要转化 12 bit 右移4位
    * 获取40个值之后,进行差值,并且通过双路DAC输出
    * 用示波器的XY模式,可以获得幅频响应
* 另外两个模式
    * 题目要求双绞线传输,需要设计通信协议防止误码,直接采用串口协议...(结果没有误码)
    * WiFi传输
        * 采用STA(Station)以手机热点作为AP
        * 采用Jupyter Notebook建立client,接受数据并且画图




# ADC Calib
|Input|adc_read|
|--|--|
|600 mV| 583|
|900 mV |945|
|1.2V|1328|
|1.5V|1700|
|1.8|2068|
|2.1|2435|
|2.4|2810|
|2.7|3217|
|3|3760|
|3.1|3974|
|3.2|4095|
|3.3|4095|